<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.596">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>PsychoPy Training 1 - 1&nbsp; Cats and Dogs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./part-one.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Cats and Dogs</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title d-none d-lg-block"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Cats and Dogs</span></h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">PsychoPy Training 1</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">About</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./part-one.html" class="sidebar-item-text sidebar-link">Part One</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cats-dogs.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Cats and Dogs</span></a>
  </div>
</li>
    </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Appendices</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./authoring-tools.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">authoring tools</span></a>
  </div>
</li>
    </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#instructions-routine" id="toc-instructions-routine" class="nav-link active" data-scroll-target="#instructions-routine"> <span class="header-section-number">1.1</span> Instructions Routine</a></li>
  <li><a href="#trial-procedure" id="toc-trial-procedure" class="nav-link" data-scroll-target="#trial-procedure"> <span class="header-section-number">1.2</span> Trial Procedure</a></li>
  <li><a href="#trial-sequence" id="toc-trial-sequence" class="nav-link" data-scroll-target="#trial-sequence"> <span class="header-section-number">1.3</span> Trial Sequence</a></li>
  <li><a href="#stimulus-files" id="toc-stimulus-files" class="nav-link" data-scroll-target="#stimulus-files"> <span class="header-section-number">1.4</span> Stimulus Files</a></li>
  <li><a href="#making-the-trial-loop" id="toc-making-the-trial-loop" class="nav-link" data-scroll-target="#making-the-trial-loop"> <span class="header-section-number">1.5</span> Making the trial loop</a></li>
  <li><a href="#finessing-the-trial-loop" id="toc-finessing-the-trial-loop" class="nav-link" data-scroll-target="#finessing-the-trial-loop"> <span class="header-section-number">1.6</span> Finessing the Trial Loop</a></li>
  <li><a href="#sec-kbcorrectness" id="toc-sec-kbcorrectness" class="nav-link" data-scroll-target="#sec-kbcorrectness"> <span class="header-section-number">1.7</span> Handling the keyboard response</a></li>
  <li><a href="#feedback" id="toc-feedback" class="nav-link" data-scroll-target="#feedback"> <span class="header-section-number">1.8</span> Feedback</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<p>In this chapter we create a simple experiment, bit by bit, with instructions, stimuli, and responses, where the stimuli are pictures of dogs and cats, and the task is to identify whether the current trial’s animal is a dog or a cat using the keyboard to press ‘c’ for cat or ‘d’ for dog.</p>
<!-- Doing this might seem trivial but doing this gives us a way to cover the following topics: -->
<!-- * How to present text where you know in advance what the content will be - like instructions to the participant at the start of the experiment. -->
<!-- * How to vary the duration that the text is presented for. -->
<!-- * How to vary the properties of the text (font, colour, size, location) -->
<!-- * How to use the basic building blocks of a PsychoPy experiment - its _Routines_ and _Components_ -->
<!-- * How to collect a response from the participant; record its RT; and evaluate it for accuracy. -->
<!-- * How to present an image (when you don't know in advance what its content should be because the order of presentation should be randomised over trials) [using a spreadsheet to supply the image filenames and handle randomisation] -->
<!-- * How to present many stimuli over the course of an experiment without creating a new image every time - by using a _loop_ over a single stimulus Component. -->
<!-- * [How to vary the properties of the image like position, size, rotation so that they can be different on different trials] -->
<!-- * How to show feedback whose content differs according to the response given on each trial. -->
<section id="instructions-routine" class="level2 page-columns page-full" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="instructions-routine"><span class="header-section-number">1.1</span> Instructions Routine</h2>
<p>We start with a blank psyexp<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>We then add:</p>
<ul>
<li>instructions to the participant about the task and which buttons to press - including an instruction to press space to continue.</li>
<li>a keyboard component so the participant can press space to continue</li>
</ul>
<p>During the course, I will show you live in PsychoPy while sharing my screen how to build this up. This website is intended to be used for reference after the course though, so I include a screencast of me building this up in <a href="#fig-instructions_to_participant">Figure&nbsp;<span>1.1</span></a> below.</p>

<div class="no-row-height column-margin column-container"><div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>All the screencasts in this document can be viewed full-screen using the standard YouTube-style controls in the bottom-right:<br>
<img src="img/chrome_dUU1V4QI5z.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div></div><div class="cell">
<div id="fig-instructions_to_participant" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/2022-07-02 20-49-04.mkv" type="video/mp4" width="100%" controls="1" muted="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.1: How to add instructions to the participant and let them press space to continue</figcaption><p></p>
</figure>
</div>
</div>
<p>During the course, you should reproduce this partial experiment on your own machine. The best advice is to build it up bit by bit yourself. However I will include links to download partial experiments and complete experiments every now and then in this document. See for example the blue box below. The links will be to zip files which you must extract properly before opening: in Windows right-click on the zip file and do “extract all”, then use the folder that appears without the ‘.zip’ file extension</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Download
</div>
</div>
<div class="callout-body-container callout-body">
<p>Click <a href="psy/file1.zip">file1</a> to download the psyexp so far. Notice that these files have fullscreen unticked: you should change this by ticking the fullscreen box for real experiments. I’m only unticking fullscreen so that my screencast software can see the window.</p>
</div>
</div>
<p><a href="#fig-runtime001">Figure&nbsp;<span>1.2</span></a> is a screencast of PsychoPy running this (partial) experiment on my machine.</p>
<div class="cell">
<div id="fig-runtime001" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/2022-07-02 23-21-28.mkv" type="video/mp4" width="100%" controls="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.2: Runtime</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="trial-procedure" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="trial-procedure"><span class="header-section-number">1.2</span> Trial Procedure</h2>
<p>We now deal with what happens after they press ‘space’ to continue past the instructions screen.</p>
<p>On each trial we want to present one of our animal images for some duration during which the participant has the chance to type a response. If they don’t respond in time, we want the trial to time out, to encourage quick responses. Let’s say we want the duration to be one second, so it’s: <em>“display the image for one second then take it off the screen, and they can only respond while the image is on screen.”</em></p>
<p>We want to record the RT and evaluate the response for correctness.</p>
<p>We want to add feedback saying “CORRECT!” in green ink, or “WRONG!” in red ink, or “RESPOND FASTER!” in black ink if they timed out.</p>
<p>Then we’ll have an inter-trial interval of one second, then start the next trial.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> We’ll run ten trials, and use 5 cats and 5 dogs.</p>
</section>
<section id="trial-sequence" class="level2 page-columns page-full" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="trial-sequence"><span class="header-section-number">1.3</span> Trial Sequence</h2>
<p>In PsychoPy, you use a spreadsheet to define the trials of your experiment. The convention is that each row of the spreadsheet after the header row corresponds to a single trial. So to plan a sequence of 10 trials we need a spreadsheet with 10 rows after the header row.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>If the rows represent trials, how should we think about the columns? Each column is an opportunity to pass in some property of that trial. In our cats and dogs experiment, each trial is going to need an image of a cat or dog. So we make a column called, say, “animal_image”<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> which will hold the filename for the image you want to show on that trial – so the first row of “animal_image” might contain “cat1.jpg” and the second “dog1.jpg” and so on for ten rows.</p>
<p>We also have the opportunity to use the trial sequence spreadsheet to have a column saying, for each trial, what the correct answer is based on which kind of image is being presented in the same row / trial. See the column ‘expected_answer’ in <a href="#fig-xls1">Figure&nbsp;<span>1.3</span></a> that contains ‘c’ on rows where a cat is presented and ‘d’ on rows where a dog is presented.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="cell">
<div class="cell-output-display">
<div id="fig-xls1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><a href="img/trial_defs_cats_dogs.png"><img src="img/trial_defs_cats_dogs.png" class="img-fluid figure-img" style="width:100.0%"></a></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.3: Trial Sequence File (click to view bigger)</figcaption><p></p>
</figure>
</div>
</div>
</div>
</div></div><p>If we do supply the expected answer like this, then, since everything we put in the input spreadsheet is available to the code at runtime, we can say things like the following to evaluate the response for accuracy:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> response.keys:</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> response.keys <span class="op">==</span> expected_answer:</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    feedback.text<span class="op">=</span><span class="st">"CORRECT!"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    feedback.text<span class="op">=</span><span class="st">"green"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> response_keys <span class="op">!=</span> expected_answer:</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    feedback.text<span class="op">=</span><span class="st">"WRONG!"</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    feedback.text<span class="op">=</span><span class="st">"red"</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  feedback.text<span class="op">=</span><span class="st">"Timeout - please respond faster!"</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  feedback.text<span class="op">=</span><span class="st">"black"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="stimulus-files" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="stimulus-files"><span class="header-section-number">1.4</span> Stimulus Files</h2>
<p>We need to track down images of 5 cats and 5 dogs, and then name them according to the scheme in <a href="#fig-xls1">Figure&nbsp;<span>1.3</span></a></p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Download
</div>
</div>
<div class="callout-body-container callout-body">
<p>Click <a href="img/stimuli.zip">stimuli</a> to download the cats and dogs pictures</p>
</div>
</div>
</section>
<section id="making-the-trial-loop" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="making-the-trial-loop"><span class="header-section-number">1.5</span> Making the trial loop</h2>
<p>See <a href="#fig-mkTrialLoop">Figure&nbsp;<span>1.4</span></a> for:</p>
<ul>
<li>add trials Routine
<ul>
<li>add image
<ul>
<li>set duration (1.0 seconds)</li>
<li>use <code>$animal_image</code> for <code>image.Image</code> field and change drop-down from <em>constant</em> to <em>set every repeat</em></li>
</ul></li>
<li>add keyboard
<ul>
<li>set allowed_keys field to <code>'c','d'</code></li>
<li>set duration to 1.0 seconds - now they won’t be able to respond after the image disappears. The keyboard’s start and stop times are the same as the image’s</li>
</ul></li>
<li>enclose with loop
<ul>
<li>The <code>Conditions</code> field is where you put the name of the spreadsheet</li>
<li>leave ‘random’ - the default - but notice that sequential is also available</li>
<li>change the default from 5 to 1 (because we only want to run the ten trials once)</li>
</ul></li>
</ul></li>
</ul>
<div class="cell">
<div id="fig-mkTrialLoop" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/addTrialsLoop.mp4" type="video/mp4" width="100%" controls="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.4: Making the trial loop</figcaption><p></p>
</figure>
</div>
</div>
<p>See <a href="#fig-runTrialLoop">Figure&nbsp;<span>1.5</span></a> for the runtime as things stand now.</p>
<div class="cell">
<div id="fig-runTrialLoop" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/2022-07-03 01-27-54.mkv" type="video/mp4" width="100%" controls="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.5: Running the basic loop</figcaption><p></p>
</figure>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Download
</div>
</div>
<div class="callout-body-container callout-body">
<p>Click <a href="psy/file2.zip">file2</a> to download the psyexp in a crude but working state.</p>
</div>
</div>
</section>
<section id="finessing-the-trial-loop" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="finessing-the-trial-loop"><span class="header-section-number">1.6</span> Finessing the Trial Loop</h2>
<p>At this stage things are basically working - the trial sequence is being randomised correctly; the images come up for the right amount of time; etc.</p>
<p>However we can improve some things quite easily going into the <code>file3.psyexp</code></p>
<ul>
<li>add an inter-trial interval (0.5 seconds)</li>
<li>set the images to be prepared during the inter-trial interval (better stimulus duration consistency)</li>
<li>give the components names that will help us understand better what they do when we see them later in results files</li>
<li>make the stimulus duration longer (the images were going by without responses because the duration was too short) - try 1.5 seconds.</li>
<li>set the aspect ratio on the images to the original for the pictures to avoid the squashed look.</li>
</ul>
<p><a href="#fig-finesseTrialLoop">Figure&nbsp;<span>1.6</span></a> shows how to do this finessing.</p>
<div class="cell">
<div id="fig-finesseTrialLoop" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/2022-07-03 01-38-39.mkv" type="video/mp4" width="100%" controls="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.6: Finessing the trial loop</figcaption><p></p>
</figure>
</div>
</div>
<p><a href="#fig-finesseTrialLoopRunTime">Figure&nbsp;<span>1.7</span></a> shows the runtime now after a little finessing.</p>
<div class="cell">
<div id="fig-finesseTrialLoopRunTime" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/2022-07-03 02-01-24.mkv" type="video/mp4" width="100%" controls="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.7: Finessing the trial loop - runtime</figcaption><p></p>
</figure>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Download
</div>
</div>
<div class="callout-body-container callout-body">
<p>Click <a href="psy/file3.zip">file3</a> to download the file3 psyexp as it stands after a little finessing.</p>
</div>
</div>
</section>
<section id="sec-kbcorrectness" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="sec-kbcorrectness"><span class="header-section-number">1.7</span> Handling the keyboard response</h2>
<p>The keyboard component has 3 attributes. They are named using the name of the keyboard component (which is <code>key_resp</code> by default).</p>
<ol type="1">
<li><code>key_resp.keys</code>: a list of the allowed keys that were pressed while the keyboard component was listening for key-presses. Usually this list only has one member, but it’s possible to collect multiple key-presses.</li>
<li><code>key_resp.rt</code>: simply RT, in seconds, i.e., how long the keyboard component was active for until an allowed key was pressed</li>
<li><code>key_resp.corr</code>: accuracy coded 0 or 1, but it only exists in cases where you have requested it using the <code>Store Correct</code> tick-box of the keyboard component in the <code>data</code> tab, and only then if you also supply the correct response in the <code>Correct answer</code> field (see screenshot)
<ul>
<li><img src="img/pythonw_E2393TEDCF.png" class="img-fluid" style="width:100.0%"></li>
</ul></li>
</ol>
<p>In our <code>file3.psyexp</code>, we have supplied the correct answer on each trial in the column of the input spreadsheet called <code>$expected_answer</code>. If we then tick <code>Store correct</code> for the keyboard component in the stimulus presentation Routine, and fill out the field <code>Correct answer</code>, PsychoPy will create a variable <code>response.corr</code> that holds the accuracy on that trial as 0 or 1, and it will write that variable as a a column in the results file, with an entry on each row that was a trial.</p>
<p><a href="#fig-finessekb">Figure&nbsp;<span>1.8</span></a> shows how to set up the keyboard to record accuracy.</p>
<div class="cell">
<div id="fig-finessekb" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/2022-07-03 03-13-51.mkv" type="video/mp4" width="100%" controls="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.8: Set up the keyboard to record accuracy</figcaption><p></p>
</figure>
</div>
</div>
<p><a href="#fig-accresults">Figure&nbsp;<span>1.9</span></a> shows what it looks like in the results file after enabling accuracy recording.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-accresults" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="img/EXCEL_AdOfuIYoer.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.9: Results file showing variables from the keyboard response</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="feedback" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="feedback"><span class="header-section-number">1.8</span> Feedback</h2>
<p>There are several ways to implement feedback in PsychoPy for stimulus-response experiments like our cats and dogs example. What they have in common is that they all assume that the <code>response.corr</code> variable that we looked at in <a href="#sec-kbcorrectness"><span>Section&nbsp;1.7</span></a> is available.</p>
<p>One style is to present the participant with text indicating whether they respond correctly or not for each trial.</p>
<p>Within that style there is more than one way to implement the feedback in PsychoPy.</p>
<ul>
<li>Method 1: One way is to insert a feedback Routine after the Trial Routine that contains a single Text Component whose contents and colour are set to variables whose values we calculate using a Code component, based on the value of <code>response.corr</code>. See <a href="#fig-fbackmethod1">Figure&nbsp;<span>1.10</span></a> for a screencast of writing this method., and see <a href="#fig-fbackmethod1runtime">Figure&nbsp;<span>1.11</span></a> for the runtime. This is file5.psyexp.</li>
</ul>
<div class="cell">
<div id="fig-fbackmethod1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/2022-07-03 03-43-24.mkv" type="video/mp4" width="100%" controls="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.10: Feedback using a single text component and passing variables in for text content and text colour</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell">
<div id="fig-fbackmethod1runtime" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/2022-07-03 03-52-45.mkv" type="video/mp4" width="100%" controls="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.11: Feedback using a single text component and passing variables in for text content and text colour (runtime)</figcaption><p></p>
</figure>
</div>
</div>
<ul>
<li>Method 2: Another way is to insert the Feedback Routine after the Trial Routine, in the same way, but this time to create a Text component for each of the possible outcomes of the trial - normally <em>correct</em> and <em>incorrect</em> but also sometimes <em>time-out</em>. We then select one single outcome to display with reference to the value of <code>response.corr</code>. This is file6.psyexp.</li>
</ul>
<div class="cell">
<div id="fig-fbackmethod2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/2022-07-03 04-17-38.mkv" type="video/mp4" width="100%" controls="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.12: Feedback using multiple text components, one for each outcome, with fixed content and colour, and then supplying as the <code>Start</code> value not a time but a condition</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell">
<div id="fig-fbackmethod2runtime" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><video src="obs/2022-07-03 04-21-17.mkv" type="video/mp4" width="100%" controls="1"></video></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1.13: Feedback using multiple text components, one for each outcome, with fixed content and colour, and then supplying as the <code>Start</code> value not a time but a condition (runtime)</figcaption><p></p>
</figure>
</div>
</div>


</section>
<section class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1" role="doc-endnote"><p>‘.psyexp’ is the file extension for a PsychoPy experiment, and in this document we use ‘psyexp’ to refer to PsychoPy experiments in the same way as we use ‘jpeg’ to refer to images with ‘.jpeg’ extensions and so on<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>It’s actually better to put the inter-trial interval <em>before</em> the trial. If you do it this way, then the inter-trial interval can be used to prepare the image for the trial – which is good because it improves the consistency of the stimulus duration.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>If you want, say, the same trial contents but just repeated 10 times, there is a way to do it with one row representing that trial, and then telling PsychoPy to run the spreadsheet 10 times - but the ‘one row per trial’ way always works so it’s better to learn that way first<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>must not have any spaces in the column’s header<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
    } else {
      disableStylesheet(alternateStylesheets);
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./part-one.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Part One</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>